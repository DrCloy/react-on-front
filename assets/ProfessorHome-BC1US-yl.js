import{r as t,j as e,g as L,c as E,t as A,a as F,u as Z,f as B,C as P,b,d as N}from"./index-DWoieWJj.js";import{S as H,P as S,c as I,C as R}from"./courseAction-BQCd-J3M.js";import{C as M,F as D,T as U}from"./FilterDropDown-DW1hJBIq.js";import{u as O}from"./next-vector-4tFRqJDe.js";const $="_container_1v7tj_1",z="_header_1v7tj_12",G="_headerContainer_1v7tj_56",V="_noTodayCourse_1v7tj_64",q="_rocket_1v7tj_76",J="_rocketIcon_1v7tj_86",K="_noTodayCourseText_1v7tj_91",Q="_title_1v7tj_99",W="_description_1v7tj_108",X="_content_1v7tj_113",Y="_courseList_1v7tj_121",ee="_courseListHeader_1v7tj_132",te="_courseAdd_1v7tj_143",se="_dropdownContainer_1v7tj_153",o={container:$,header:z,headerContainer:G,noTodayCourse:V,rocket:q,rocketIcon:J,noTodayCourseText:K,title:Q,description:W,content:X,courseList:Y,courseListHeader:ee,courseAdd:te,dropdownContainer:se},oe=s=>t.createElement("svg",{width:71,height:84,viewBox:"0 0 71 84",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},t.createElement("path",{d:"M48.2986 29.5825C48.2986 29.5825 64.9991 36.7599 69.2176 48.5725C70.76 52.8963 71.1379 55.6171 70.9592 57.317C70.7549 59.2416 68.6507 60.3289 66.9245 59.456C65.9694 58.9761 64.3964 58.2461 62.1289 57.3834C56.6795 55.316 49.034 55.8009 49.034 55.8009C49.034 55.8009 46.1127 32.4667 48.3037 29.5774L48.2986 29.5825Z",fill:"#403C9C"}),t.createElement("mask",{id:"mask0_247_3156",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:47,y:29,width:24,height:31},t.createElement("path",{d:"M48.2986 29.5825C48.2986 29.5825 64.9991 36.7599 69.2176 48.5725C70.76 52.8963 71.1379 55.6171 70.9592 57.317C70.7549 59.2416 68.6507 60.3289 66.9245 59.456C65.9694 58.9761 64.3964 58.2461 62.1289 57.3834C56.6795 55.316 49.034 55.8009 49.034 55.8009C49.034 55.8009 46.1127 32.4667 48.3037 29.5774L48.2986 29.5825Z",fill:"white"})),t.createElement("g",{mask:"url(#mask0_247_3156)"},t.createElement("path",{d:"M49.4171 40.3486C49.4171 40.3486 61.5415 44.0802 62.1237 57.3834L47.4866 57.5978L49.4171 40.3434V40.3486Z",fill:"#2C1F7B"})),t.createElement("path",{d:"M10.2246 50.3847C10.2246 50.3847 8.22767 68.4456 16.4247 77.9405C19.4277 81.4169 21.6034 83.0862 23.1713 83.7703C24.9435 84.5462 26.9302 83.2496 27.0272 81.3148C27.0783 80.2479 27.2213 78.5174 27.589 76.1232C28.4776 70.365 32.6757 63.9584 32.6757 63.9584C32.6757 63.9584 13.8149 49.9048 10.2195 50.3796L10.2246 50.3847Z",fill:"#403C9C"}),t.createElement("path",{d:"M9.95388 5.00785C8.76901 4.88023 7.64543 5.5847 7.25218 6.70776C4.92331 13.3287 -1.68538 35.8666 10.0969 50.5787C21.1641 64.3975 31.5828 65.7502 31.5828 65.7502C31.5828 65.7502 38.0178 56 49.034 55.806C49.034 55.806 52.752 39.1081 47.9309 28.7249C43.1761 18.4897 34.8769 7.66747 9.95898 5.00785H9.95388Z",fill:"#4876FC"}),t.createElement("mask",{id:"mask1_247_3156",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:3,y:4,width:48,height:62},t.createElement("path",{d:"M9.95388 5.00785C8.76901 4.88023 7.64543 5.5847 7.25218 6.70776C4.92331 13.3287 -1.68538 35.8666 10.0969 50.5787C21.1641 64.3975 31.5828 65.7502 31.5828 65.7502C31.5828 65.7502 38.0178 56 49.034 55.806C49.034 55.806 52.752 39.1081 47.9309 28.7249C43.1761 18.4897 34.8769 7.66747 9.95898 5.00785H9.95388Z",fill:"white"})),t.createElement("g",{mask:"url(#mask1_247_3156)"},t.createElement("path",{d:"M0 7.50921C0 7.50921 44.0137 15.049 42.5173 44.6673C41.5009 64.7701 38.7686 69.0326 38.7686 69.0326L59.2433 68.9816L56.2403 14.656L27.829 0L4.99482 2.22571L0 7.50921Z",fill:"#4A4AFB"})),t.createElement("path",{d:"M26.8434 46.2497C32.8541 46.2497 37.7268 41.3793 37.7268 35.3713C37.7268 29.3633 32.8541 24.4929 26.8434 24.4929C20.8326 24.4929 15.96 29.3633 15.96 35.3713C15.96 41.3793 20.8326 46.2497 26.8434 46.2497Z",fill:"#9BDCFF"}),t.createElement("path",{d:"M42.4611 61.7174C41.358 62.233 40.3263 62.8915 39.407 63.693C37.0679 65.7349 33.2375 70.0383 36.3529 74.3417C40.6481 80.2786 51.2761 81.1362 53.1504 80.1969C55.0248 79.2576 57.7878 70.7019 56.1994 65.5154C54.8409 61.0946 51.8839 59.3998 48.5182 59.8184C45.9544 60.14 43.8605 61.0589 42.456 61.7123L42.4611 61.7174Z",fill:"#FFB66A"}),t.createElement("mask",{id:"mask2_247_3156",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:35,y:59,width:22,height:22},t.createElement("path",{d:"M42.4611 61.7174C41.358 62.233 40.3263 62.8915 39.407 63.693C37.0679 65.7349 33.2375 70.0383 36.3529 74.3417C40.6481 80.2786 51.2761 81.1362 53.1504 80.1969C55.0248 79.2576 57.7878 70.7019 56.1994 65.5154C54.8409 61.0946 51.8839 59.3998 48.5182 59.8184C45.9544 60.14 43.8605 61.0589 42.456 61.7123L42.4611 61.7174Z",fill:"white"})),t.createElement("g",{mask:"url(#mask2_247_3156)"},t.createElement("path",{d:"M39.5143 62.7537C39.5143 62.7537 51.1485 60.9874 50.6684 69.4104C50.1883 77.8334 47.5377 80.881 47.5377 80.881L56.2812 80.5236H57.1647L57.0064 59.1446L39.1926 59.7623L39.5143 62.7537Z",fill:"#FFA559"}))),ne="_buttonContainer_12gwb_1",re={buttonContainer:ne},ae=({onButtonClick:s})=>e.jsx("button",{className:re.buttonContainer,onClick:s,children:e.jsx(H,{color:"white"})}),ce="_todayCourse_igk49_1",ie="_left_igk49_8",le="_title_igk49_14",de="_noLargeCourse_igk49_23",ue="_todayCourseList_igk49_39",Ce="_courseRow_igk49_57",me="_todayCourseController_igk49_65",he="_page_igk49_73",C={todayCourse:ce,left:ie,title:le,noLargeCourse:de,todayCourseList:ue,courseRow:Ce,todayCourseController:me,page:he},_e=s=>{const d=t.useCallback(()=>{if(!s)return{hour:0,minute:0,second:0};const n=new Date,a=s.find(c=>c.day===L(n.getDay()));if(a){const i=E(a.start).getTime()-n.getTime();return{hour:Math.floor(i/36e5),minute:Math.floor(i%36e5/6e4),second:Math.floor(i%6e4/1e3)}}return{hour:0,minute:0,second:0}},[s]),[u,m]=t.useState(d());return t.useEffect(()=>{if(!s){m({hour:0,minute:0,second:0});return}const n=setInterval(()=>{const a=new Date,c=s.find(i=>i.day===L(a.getDay()));if(c){const l=E(c.start).getTime()-a.getTime();m({hour:Math.floor(l/36e5),minute:Math.floor(l%36e5/6e4),second:Math.floor(l%6e4/1e3)})}},1e3);return()=>clearInterval(n)},[s]),u},ge=s=>{const d=new Date,u=s.schedule.find(n=>n.day===L(d.getDay()));return u?E(u.start).getTime()<d.getTime():!0};function pe({todayCourses:s,onDetailCourse:d,onFileCourse:u,onStartCourse:m,onEditCourse:n,onDeleteCourse:a}){var y;const{prevPage:c,nextPage:i,page:l,totalPages:g,PaginationDiv:p}=O(),[r,f]=t.useState(0),j=_e((y=s[r])==null?void 0:y.schedule);t.useEffect(()=>{if(s.length===0)return;const _=s[r];_&&ge(_)&&f(r+1)},[j,s,r]);const v=()=>{const _=s.slice(r+1).concat(s.slice(0,r));return F(_,3).map((T,w)=>e.jsx("div",{className:C.courseRow,children:T.map(h=>e.jsx(M,{course:h,size:"small",onDetailCourse:d,onFileCourse:u,onStartCourse:m,onEditCourse:n,onDeleteCourse:a},h.id))},w))};return e.jsxs("div",{className:C.todayCourse,children:[e.jsxs("div",{className:C.left,children:[e.jsxs("h1",{className:C.title,children:["오늘 수업은 ",e.jsxs("span",{children:[s.length,"개"]})," 있어요!"]}),r<s.length?e.jsx(M,{course:s[r],size:"large",leftTime:j,onDeleteCourse:a,onEditCourse:n,onStartCourse:m,onDetailCourse:d,onFileCourse:u}):e.jsx("div",{className:C.noLargeCourse,children:e.jsx("span",{children:"오늘 수업이 없어요!"})})]}),e.jsxs("div",{className:C.todayCourseList,children:[e.jsx("h2",{className:C.title,children:A()}),e.jsx(p,{containerStyle:{width:"608px"},children:v()}),e.jsxs("div",{className:C.todayCourseController,children:[e.jsx(S,{onButtonClick:c,type:"prev",isActive:l>0}),e.jsxs("div",{className:C.page,children:[e.jsx("span",{children:l+1})," / ",Math.max(g,1)]}),e.jsx(S,{onButtonClick:i,type:"next",isActive:l<g-1})]})]})]})}const ve=()=>{const[s,d]=t.useState([]),[u,m]=t.useState([]),[n,a]=t.useState("수업 요일"),[c,i]=t.useState("수업 종류"),{openModal:l,closeModal:g,setModal:p,navigate:r,popupError:f}=Z(),{handleDeleteCourse:j,handleEditCourse:v,handleStartCourse:y,handleDetailCourse:_,handleFileCourse:k}=I({setModal:p,openModal:l,closeModal:g,navigate:r,popupError:f}),T=B(u,n,c);t.useEffect(()=>{async function h(){try{const x=await N.getHomeCourses();m(x.totalCourse),d(x.todayCourse)}catch(x){f(x)}}h()},[]);const w=async()=>{p(e.jsx(R,{onClose:()=>{p(null),g()},onSubmit:async h=>{try{await N.createCourse(h),p(null),g(),r(0)}catch(x){f(x)}}})),l()};return e.jsxs("div",{className:o.container,children:[e.jsx("div",{className:o.header,children:e.jsx("div",{className:o.headerContainer,children:s.length>0?e.jsx(pe,{todayCourses:s,onDeleteCourse:j,onEditCourse:v,onStartCourse:y,onDetailCourse:_,onFileCourse:k}):e.jsxs("div",{className:o.noTodayCourse,children:[e.jsx("div",{className:o.rocket,children:e.jsx(oe,{className:o.rocketIcon})}),e.jsxs("div",{className:o.noTodayCourseText,children:[e.jsxs("h1",{className:o.title,children:["수업을 만들고 ",e.jsx("span",{children:"실시간 소통"}),"을 진행해보세요"]}),e.jsx("span",{className:o.description,children:"하단 + 버튼을 눌러 수업을 생성해보세요"})]})]})})}),e.jsxs("div",{className:o.content,children:[e.jsx("div",{className:o.courseAdd,children:e.jsx(ae,{onButtonClick:w})}),e.jsxs("div",{className:o.courseList,children:[e.jsxs("div",{className:o.courseListHeader,children:[e.jsx("h2",{className:o.title,children:"수업 리스트"}),e.jsxs("div",{className:o.dropdownContainer,children:[e.jsx(D,{title:n,options:P.map(h=>`${h}요일`),setTitle:a}),e.jsx(D,{title:c,options:b,setTitle:i})]})]}),e.jsx(U,{filteredCourses:T,onDeleteCourse:j,onEditCourse:v,onStartCourse:y,onDetailCourse:_,onFileCourse:k})]})]})]})};export{ve as default};
